---
alwaysApply: true
---
üß≠ PRD ‚Äî Page RH Collaborateurs
Auteur : Fred Baudry
Version : 1.1 (Options A, C et D activ√©es)
Stack : Next.js / Supabase / Tailwind / Recharts / SheetJS
Objectif principal :
G√©rer la base des collaborateurs : identit√©, coordonn√©es, statut actif/non-actif, comp√©tences, rattachement site, informations de contact (pro/perso), et int√©gration des √©volutions A (import Excel), C (suivi RH), D (alertes fin de contrat).
________________________________________
1Ô∏è‚É£ Objectif
Cr√©er une interface RH compl√®te pour g√©rer les collaborateurs de l‚Äôentreprise :
‚Ä¢	Ajouter, modifier, archiver les profils.
‚Ä¢	Distinguer les actifs et non-actifs (anciens employ√©s, int√©rim, etc.).
‚Ä¢	G√©rer leurs coordonn√©es professionnelles et personnelles.
‚Ä¢	Relier chaque collaborateur √† son site, ses comp√©tences et son statut contractuel.
‚Ä¢	Suivre les formations, visites m√©dicales, habilitations (option C).
‚Ä¢	Recevoir des alertes de fin de contrat (option D).
‚Ä¢	Importer en masse les collaborateurs (option A).
‚Ä¢	Fournir une base exploitable par la planification, les absences et la Gantt.
________________________________________
2Ô∏è‚É£ Utilisateurs cibles
R√¥le	Acc√®s	Actions
Administratif / RH	Acc√®s total	CRUD complet, import, alertes, suivi RH
Planificateur	Lecture + export	Visualise les collaborateurs pour affectations
Responsable	Lecture restreinte	Voit uniquement son site et ses √©quipes
Direction	Lecture globale	Vue consolid√©e, non modifiable
________________________________________
3Ô∏è‚É£ Fonctionnalit√©s principales
üîπ 3.1 Tableau des collaborateurs
‚Ä¢	Vue principale en tableau dynamique (sortable + filtrable).
‚Ä¢	Colonnes : Nom / Pr√©nom / Site / Comp√©tences / Statut / Type contrat / Email pro/perso / T√©l√©phone / Adresse / Dates entr√©e-sortie.
‚Ä¢	Filtres : site / comp√©tence / statut / contrat.
‚Ä¢	Recherche rapide + export CSV / Excel.
üîπ 3.2 Ajout / modification
‚Ä¢	Bouton ‚Äú+ Nouveau collaborateur‚Äù ‚Üí modale formulaire.
‚Ä¢	Champs obligatoires : Nom, Pr√©nom, Site, Statut actif, Type contrat.
‚Ä¢	Champs optionnels : Email pro/perso, T√©l√©phone, Adresse, Comp√©tences, Dates entr√©e/sortie.
‚Ä¢	Validation stricte :
o	Email valide ; au moins un requis.
o	T√©l√©phone format +33.
o	Si actif=false ‚Üí champ ‚Äúdate fin‚Äù obligatoire.
‚Ä¢	Historisation via table historique_actions.
üîπ 3.3 Statut actif / non-actif
‚Ä¢	Actif =true ‚Üí visible dans planif / couverture.
‚Ä¢	Non-actif =false ‚Üí archiv√© (historique conserv√©).
‚Ä¢	Si d√©sactivation ‚Üí suppression auto des affectations futures + enregistrement historique.
üîπ 3.4 Coordination inter-modules
‚Ä¢	Planification Gantt : n‚Äôaffiche que actif =true.
‚Ä¢	Absences : pas d‚Äôabsence future pour collaborateur inactif.
‚Ä¢	Ad√©quation charge/comp√©tence : calcul uniquement sur ressources actives.
‚Ä¢	Suivi projets : responsable visible seulement si actif.
________________________________________
4Ô∏è‚É£ Mod√®le de donn√©es (Supabase)
Table : ressources
Champ	Type	Description
id	uuid	Identifiant unique
nom	text	Nom
prenom	text	Pr√©nom
site	text	Site
actif	bool	true = actif
type_contrat	text	CDI / CDD / Int√©rim / Apprenti / Autre
email_pro	text	Email pro (nullable)
email_perso	text	Email perso (nullable)
telephone	text	T√©l√©phone
adresse_postale	text	Adresse compl√®te
competences	text[]	Comp√©tences principales
date_entree	date	Entr√©e
date_sortie	date	Fin contrat
date_creation	timestamp	Date ajout
created_by	uuid	Cr√©ateur
Table : historique_actions
Champ	Type	Exemple
element_type	text	‚Äúressource‚Äù
action	text	‚Äúd√©sactivation‚Äù, ‚Äúajout‚Äù, ‚Äúmodification‚Äù
valeur_avant	json	{ "actif": true }
valeur_apres	json	{ "actif": false }
date_action	timestamp	2025-10-18 T08:00:00Z
Table : suivi_rh (√©volution C)
Champ	Type	Description
id	uuid	Identifiant
ressource_id	uuid	Lien ‚Üí ressources.id
type_suivi	text	‚ÄúVisite m√©dicale‚Äù, ‚ÄúFormation‚Äù, ‚ÄúHabilitation‚Äù
date_realisation	date	Derni√®re r√©alisation
date_expiration	date	Date validit√©
statut	text	Valide / Expir√© / √Ä renouveler
commentaire	text	Notes RH
________________________________________
5Ô∏è‚É£ R√®gles m√©tiers
‚Ä¢	Email pro prioritaire, sinon email perso.
‚Ä¢	Minimum 1 email valide obligatoire.
‚Ä¢	T√©l√©phone +33 obligatoire.
‚Ä¢	Non-actif ‚Üí aucune affectation future.
‚Ä¢	Suppression physique interdite ; archivage uniquement.
‚Ä¢	Si date_sortie approche ‚Üí alerte automatique (option D).
________________________________________
6Ô∏è‚É£ Crit√®res d‚Äôacceptation
ID	Crit√®re	Validation
RH-01	Ajout collaborateur sans email pro mais avec perso	‚úÖ
RH-02	Filtrage actif/non-actif	‚úÖ
RH-03	Historique d√©sactivation enregistr√©	‚úÖ
RH-04	Planif Gantt = ressources actives uniquement	‚úÖ
RH-05	T√©l√©phone + adresse enregistr√©s	‚úÖ
RH-06	Export CSV/XLSX complet	‚úÖ
RH-07	Import Excel (option A) op√©rationnel	‚úÖ
RH-08	Suivi RH (formations, habilitations) visible (option C)	‚úÖ
RH-09	Alertes fin de contrat J-30 / J-7 envoy√©es (option D)	‚úÖ
RH-10	Interface fluide et responsive	‚úÖ
________________________________________
7Ô∏è‚É£ Stack technique
√âl√©ment	Outil	D√©tails
Backend	Supabase	Tables : ressources, suivi_rh, historique_actions
Frontend	Next.js + Tailwind	UI CRUD et filtrage
Formulaires	React Hook Form + Zod	Validation champs
Export / Import	SheetJS	CSV / Excel
Alertes	Supabase Functions + SMTP	Envoi auto mails fin contrat
Auth	Supabase Session	Acc√®s limit√© selon r√¥le
Charts	Recharts	Statistiques RH
________________________________________
8Ô∏è‚É£ √âvolutions activ√©es
R√©f	Nom	Description
A	Import en masse (Excel/CSV)	Upload fichier RH ‚Üí mapping auto ‚Üí cr√©ation / mise √† jour collaborateurs. Validation anti-doublons sur email ou (nom+site).
C	Suivi RH (visites, formations, habilitations)	Onglet individuel par collaborateur avec dates, statuts, alertes ‚Äú√† renouveler‚Äù.
D	Alertes fin de contrat	Fonction cron Supabase envoyant email automatique au RH et au responsable √† J-30 et J-7 de la date de sortie.

