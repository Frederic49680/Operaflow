---
alwaysApply: true
---
ğŸ§­ PRD â€” Module Dashboard Global (Pilotage & Indicateurs)
Auteur : Fred Baudry
Version : 1.0
Stack : Next.js 15 / Supabase / Tailwind / Recharts / Power BI (option embed)
Objectif principal :
Fournir une interface de pilotage unifiÃ©e regroupant les KPI stratÃ©giques des modules clÃ©s :
Planification, Affaires, Ressources, Absences, Maintenance, Claims, et Reporting terrain.
Le Dashboard sert Ã  analyser, anticiper et dÃ©cider.
Chaque utilisateur y voit ce quâ€™il doit suivre :
â€¢	N1 (Resp. Site) â†’ suivi opÃ©rationnel, activitÃ©s quotidiennes.
â€¢	N2 (Planificateur) â†’ charge, couverture, conflits, dÃ©rives.
â€¢	N3 (Direction / PMO) â†’ synthÃ¨se financiÃ¨re, dÃ©lais, claims, performance globale.
________________________________________
1ï¸âƒ£ Objectifs
CrÃ©er une vue centralisÃ©e et interactive qui :
â€¢	agrÃ¨ge toutes les donnÃ©es issues des modules (Affaires, RH, Gantt, Claims, Maintenance, RemontÃ©es Site, etc.),
â€¢	calcule et affiche les KPI clÃ©s selon le profil utilisateur,
â€¢	permet un filtrage dynamique (par site, pÃ©riode, responsable, compÃ©tence, etc.),
â€¢	met en Ã©vidence les alertes (suraffectations, retards, claims ouverts, absences critiquesâ€¦),
â€¢	fournit une synthÃ¨se graphique claire, exportable et actualisÃ©e automatiquement.
________________________________________
2ï¸âƒ£ Utilisateurs & vues disponibles
RÃ´le	Vue principale	Objectif
Responsable de Site (N1)	Vue terrain	ActivitÃ©s du jour, retards, absences, blocages
Planificateur (N2)	Vue planif	Couverture, charge, conflits, avancements
ChargÃ© dâ€™Affaires (N2)	Vue affaires	Finances, marges, claims, Ã©chÃ©ances
Direction / PMO (N3)	Vue synthÃ¨se	Performance globale, KPIs consolidÃ©s
Maintenance	Vue dÃ©diÃ©e	TÃ¢ches terminÃ©es / reportÃ©es par batterie
________________________________________
3ï¸âƒ£ Structure du Dashboard
ğŸ”¹ 3.1 Barre de filtres globale
â€¢	Filtres communs Ã  toutes les cartes :
o	PÃ©riode : semaine / mois / trimestre / annÃ©e
o	Site / Affaire / Responsable / CompÃ©tence
o	Statut (Actif / TerminÃ© / ReportÃ© / BloquÃ©)
â€¢	Option de synchronisation des filtres entre cartes (â€œfiltre global activÃ©â€).
________________________________________
ğŸ”¹ 3.2 Cartes & KPI par module
ğŸ§± Bloc 1 â€” Planification & Ressources
Indicateur	Description	Visuel
Taux de couverture global	Ratio Ressources dispo / Besoin chantier	Barres empilÃ©es 100 %
Suraffectations dÃ©tectÃ©es	Nb ressources assignÃ©es > 100 %	Badge rouge + liste
Taux de rÃ©alisation tÃ¢ches (semaine)	Moyenne des avancements rÃ©els	Ligne Ã©volutive
Top 5 ressources en surcharge	Par cumul dâ€™affectations	Carte horizontale
Alertes absences non couvertes	Ressources absentes affectÃ©es	Liste priorisÃ©e
________________________________________
ğŸ’¼ Bloc 2 â€” Affaires & Financier
Indicateur	Description	Visuel
Affaires actives	Nb affaires en cours / validÃ©es	Compteur
Taux dâ€™avancement global	Moyenne pondÃ©rÃ©e par budget	Jauge circulaire
Atterrissage vs Budget	Montant consommÃ© + RAF vs Budget total	Barres empilÃ©es vert/rouge
Marge moyenne	Moyenne pondÃ©rÃ©e sur affaires en cours	Donut chart
Affaires en dÃ©rive (>10%)	Liste dynamique (Ã©cart budget > 10 % ou dÃ©lai dÃ©passÃ©)	Tableau colorÃ©
________________________________________
ğŸ§‘â€ğŸ’¼ Bloc 3 â€” Ressources humaines
Indicateur	Description	Visuel
Ressources actives	Nb total par type contrat	Carte num.
Taux dâ€™absentÃ©isme	Jours absents / Jours ouvrÃ©s	Courbe mensuelle
CompÃ©tences sous tension	Ratio besoin / dispo < 1	Barres rouges
Turnover / nouvelles entrÃ©es	Variation mensuelle	Graph barres + delta
________________________________________
ğŸ›  Bloc 4 â€” Maintenance
Indicateur	Description	Visuel
Batteries terminÃ©es	Nb vs prÃ©vues sur pÃ©riode	Donut chart
Batteries reportÃ©es	Nb vs terminÃ©es	Ratio bar chart
Temps mÃ©tal cumulÃ©	h total productive (hors suspensions)	Jauge horizontale
Interventions bloquÃ©es / suspendues	Nombre + tendance	Barres verticales
________________________________________
âš¡ Bloc 5 â€” Claims / Blocages / Retards
Indicateur	Description	Visuel
Claims ouverts	Nb total / site	Badge + liste
Montant total claims	Somme des coÃ»ts estimÃ©s	Jauge financiÃ¨re
DurÃ©e moyenne rÃ©solution	Jours entre ouverture / clÃ´ture	Courbe
Blocages actifs	Nb par site / affaire	Heatmap ou timeline
________________________________________
ğŸ— Bloc 6 â€” ActivitÃ© terrain (RemontÃ©e site)
Indicateur	Description	Visuel
TÃ¢ches confirmÃ©es du jour	% vs planifiÃ©es	Jauge
TÃ¢ches bloquÃ©es / suspendues	Nb total / site	Badge rouge
Temps mÃ©tal global du jour	Somme heures productives	Barre horizontale
Avancement journalier moyen	Moyenne des % avancement tÃ¢ches actives	Ligne cumulÃ©e
________________________________________
ğŸ“ Bloc 7 â€” Clients / Interlocuteurs
Indicateur	Description	Visuel
Clients actifs	Nb total	Badge
Affaires/client	Ratio moyen	Histogramme
Claims/client	Nb + montant cumulÃ©	Barres empilÃ©es
Satisfaction estimÃ©e (si ajout futur)	Score moyen par feedback	Smiley gauge
________________________________________
ğŸ”¹ 3.3 Alert Center (notifications & anomalies)
EncadrÃ© latÃ©ral regroupant :
â€¢	Sur-affectations en cours
â€¢	Absences non couvertes
â€¢	Claims non traitÃ©s
â€¢	ActivitÃ©s non confirmÃ©es
â€¢	Batteries reportÃ©es
â€¢	Interlocuteurs non renseignÃ©s sur affaires validÃ©es
Chaque alerte â†’ clic = navigation vers module correspondant.
________________________________________
ğŸ”¹ 3.4 Section â€œReporting & Exportâ€
â€¢	Export global en PDF / Excel des vues filtrÃ©es.
â€¢	Mail auto journalier / hebdo / mensuel :
o	Journalier (Responsables Site) â†’ tÃ¢ches / avancements / anomalies.
o	Hebdo (Planificateurs) â†’ couverture / charge / absences / dÃ©rives.
o	Mensuel (Direction) â†’ synthÃ¨se affaires / marges / claims / RH.
â€¢	GÃ©nÃ©ration automatique stockÃ©e dans Supabase Storage (trace envoyÃ©e).
________________________________________
4ï¸âƒ£ ModÃ¨le de donnÃ©es (Supabase / vues agrÃ©gÃ©es)
â€¢	Vue V_Dashboard_RH â†’ RH / absences / taux dispo.
â€¢	Vue V_Dashboard_Affaires â†’ avancement, budget, marge, atterrissage.
â€¢	Vue V_Dashboard_Planif â†’ charge / couverture / conflits.
â€¢	Vue V_Dashboard_Maintenance â†’ batteries, suspensions, temps mÃ©tal.
â€¢	Vue V_Dashboard_Claims â†’ claims actifs, durÃ©es moyennes.
â€¢	Vue V_Dashboard_Site â†’ activitÃ© journaliÃ¨re, taux confirmation.
â€¢	Vue V_Dashboard_Client â†’ clients, affaires, claims.
Ces vues sont alimentÃ©es automatiquement via triggers ou fonctions de synchro quotidienne (Ã  06h00).
________________________________________
5ï¸âƒ£ RÃ¨gles mÃ©tier
â€¢	DonnÃ©es rÃ©elles > planifiÃ©es : prioritÃ© aux statuts terrain confirmÃ©s.
â€¢	Les cartes se filtrent dynamiquement selon la sÃ©lection globale.
â€¢	Si aucune donnÃ©e disponible â†’ affiche un Ã©tat neutre (gris).
â€¢	RafraÃ®chissement auto toutes les 10 minutes (Revalidate).
â€¢	AccÃ¨s restreint par rÃ´le :
o	Resp. Site : uniquement son site.
o	Planificateur : sites quâ€™il gÃ¨re.
o	Direction : global.
________________________________________
6ï¸âƒ£ CritÃ¨res dâ€™acceptation
ID	CritÃ¨re	Validation
DASH-01	DonnÃ©es consolidÃ©es issues des modules	âœ…
DASH-02	Filtres synchronisÃ©s inter-cartes	âœ…
DASH-03	Vue adaptÃ©e au rÃ´le utilisateur	âœ…
DASH-04	Alertes dynamiques cohÃ©rentes	âœ…
DASH-05	Exports et mails auto corrects	âœ…
DASH-06	Temps de chargement < 3 s	âœ…
DASH-07	Responsive (desktop + mobile)	âœ…
DASH-08	Actualisation automatique	âœ…
________________________________________
7ï¸âƒ£ Stack technique
Ã‰lÃ©ment	Techno
Backend	Supabase (vues & fonctions)
Frontend	Next.js + Tailwind
Charts	Recharts (ou ECharts si besoin de densitÃ©)
Exports	SheetJS (Excel), PDFKit (PDF)
Automatisation	Supabase Cron / Power Automate
Auth	Supabase Session (rÃ´le)
Storage	Supabase (pour PDF mails)
________________________________________
8ï¸âƒ£ UI / Layout
â€¢	DashboardLayout : grille 3x2 sur desktop, scroll vertical sur mobile.
â€¢	FilterBar (sticky)
â€¢	Cards :
o	KpiCard (valeur unique)
o	BarStackChart (charge/couverture)
o	PieDonutChart (marges / maintenance)
o	TrendLine (avancement / retard)
o	AlertList (blocages / claims)
â€¢	ExportToolbar (PDF / Excel / Mail)
Design visuel : clean, codes couleur constants (vert OK, orange dÃ©rive, rouge alerte).
________________________________________
9ï¸âƒ£ IntÃ©grations inter-modules
Module	DonnÃ©es alimentÃ©es
RH	Ressources actives / absences / taux dispo
Affaires	Avancement / budget / marge / atterrissage
Planification	Couverture / suraffectations / conflits
RemontÃ©e site	Statuts rÃ©els / temps mÃ©tal / confirmations
Maintenance	Batteries terminÃ©es / reportÃ©es
Claims	Claims ouverts / coÃ»ts / durÃ©es
Interlocuteurs	Clients actifs / incidents liÃ©s
Power Automate	Envoi rapports pÃ©riodiques
________________________________________
ğŸ”Ÿ Exemple de cycle de vie
1ï¸âƒ£ 06:00 : rafraÃ®chissement des vues Dashboard (fonctions Supabase).
2ï¸âƒ£ 07:00 : ouverture â†’ planificateur voit couverture & conflits.
3ï¸âƒ£ 08:00 : responsables terrain saisissent remontÃ©es.
4ï¸âƒ£ 17:00 : maintenance + validations du jour.
5ï¸âƒ£ 20:00 : digest journalier envoyÃ©.
6ï¸âƒ£ Fin de mois : tableau consolidÃ© (affaires, marges, claims) envoyÃ© Ã  la direction.

